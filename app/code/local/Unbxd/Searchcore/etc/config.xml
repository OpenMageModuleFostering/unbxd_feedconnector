<config>
	<modules>
		<Unbxd_Searchcore>
			<version>1.0.22</version>
		</Unbxd_Searchcore>
	</modules>
    <admin>
        <routers>
            <adminhtml>
                <args>
                    <modules>
                        <unbxd after="Mage_Adminhtml">Unbxd_Searchcore_Adminhtml</unbxd>
                    </modules>
                </args>
            </adminhtml>
        </routers>
    </admin>
	<frontend>
		<layout>
			<updates>
				<unbxd_searchcore>
					<file>unbxd/searchcore.xml</file>
				</unbxd_searchcore>
			</updates>
		</layout>
		<routers>
			<unbxd_searchcore>
				<use>standard</use>
				<args>
					<module>Unbxd_Searchcore</module>
					<frontName>searchcore</frontName>
				</args>
			</unbxd_searchcore>
		</routers>
	</frontend>
	<global>
        <resources>
            <unbxd_searchcore_setup>
                <setup>
                    <module>Unbxd_Searchcore</module>
                </setup>
            </unbxd_searchcore_setup>
        </resources>
        <helpers>
            <unbxd_searchcore>
                <class>Unbxd_Searchcore_Helper</class>
            </unbxd_searchcore>
        </helpers>
		<models>
			<unbxd_searchcore>
				<class>Unbxd_Searchcore_Model</class>
				<resourceModel>unbxd_searchcore_resource</resourceModel>
			</unbxd_searchcore>
			<unbxd_searchcore_resource>
				<class>Unbxd_Searchcore_Model_Resource</class>
				<entities>
					<config>
						<table>unbxd_recommendation_conf</table>
					</config>
                    <field>
                        <table>unbxd_field_conf</table>
                    </field>
                    <sync>
                        <table>unbxd_product_sync</table>
                    </sync>
				</entities>
			</unbxd_searchcore_resource>
		</models>
        <blocks>
            <unbxd_searchcore>
                <class>Unbxd_Searchcore_Block</class>
            </unbxd_searchcore>
        </blocks>
		<events>
			<controller_action_predispatch_unbxd_searchcore>
				<observers>
					<unbxd_searchcore_auth>
						<type>singleton</type>
                                                <class>unbxd_searchcore/auth</class>
                                                <method>authorize</method>
					</unbxd_searchcore_auth>
				</observers>
			</controller_action_predispatch_unbxd_searchcore>
			<checkout_cart_add_product_complete>
				<observers>
					<unbxd_searchcore_cart_tracker>
						<type>singleton</type>
						<class>unbxd_searchcore/observer</class>
						<method>trackAddToCart</method>
					</unbxd_searchcore_cart_tracker>
				</observers>
			</checkout_cart_add_product_complete>
			<sales_order_payment_place_end>
				<observers>
					<unbxd_searchcore_order_tracker>
						<type>singleton</type>
						<class>unbxd_searchcore/observer</class>
						<method>trackOrder</method>
					</unbxd_searchcore_order_tracker>
				</observers>
			</sales_order_payment_place_end>
            <catalog_product_delete_before>
                <observers>
                    <unbxd_searchcore_order_tracker>
                        <type>singleton</type>
                        <class>unbxd_searchcore/observer</class>
                        <method>trackDelete</method>
                    </unbxd_searchcore_order_tracker>
                </observers>
            </catalog_product_delete_before>
            <catalog_product_delete_commit_after>
                <observers>
                    <unbxd_searchcore_order_tracker>
                        <type>singleton</type>
                        <class>unbxd_searchcore/observer</class>
                        <method>trackDelete</method>
                    </unbxd_searchcore_order_tracker>
                </observers>
            </catalog_product_delete_commit_after>
	     <cataloginventory_stock_item_save_commit_after>
                <observers>
                    <unbxd_searchcore_catalog_inventory_save>
                        <type>singleton</type>
                        <class>unbxd_searchcore/observer</class>
                        <method>catalogInventorySave</method>
                    </unbxd_searchcore_catalog_inventory_save>
                </observers>
            </cataloginventory_stock_item_save_commit_after>
            <sales_order_item_cancel>
                <observers>
                    <unbxd_searchcore_order_cancel>
                        <type>singleton</type>
                        <class>unbxd_searchcore/observer</class>
                        <method>catalogInventorySave</method>
                    </unbxd_searchcore_order_cancel>
                </observers>
            </sales_order_item_cancel>
		</events>
	</global>
    <adminhtml>
        <layout>
            <updates>
                <unbxd_searchcore>
                    <file>unbxd/searchcore.xml</file>
                </unbxd_searchcore>
            </updates>
        </layout>
	<acl>
	   <resources>
	     <admin>
	       <children>
	         <unbxd module="unbxd_searchcore">
		   <title>Unbxd</title>
	         </unbxd>
	       </children>
	     </admin>
	   </resources>
	</acl>
    </adminhtml>
    <crontab>
        <jobs>
            <unbxd_searchcore_sync>
                <schedule><cron_expr>0 1 * * *</cron_expr></schedule>
                <run><model>unbxd_searchcore/observer::syncFull</model></run>
            </unbxd_searchcore_sync>
	    <unbxd_searchcore_incremental_cron>
                 <schedule><cron_expr>0 */1 * * *</cron_expr></schedule>
                 <run><model>unbxd_searchcore/observer::syncIncremental</model></run>
            </unbxd_searchcore_incremental_cron>
        </jobs>
    </crontab>
    <default>
        <unbxd>
            <general>
		<price>final_price</price>
		<productUrl>url_path</productUrl>
                <max_feed_lock_feed>2</max_feed_lock_feed>
                <include_out_of_stock>true</include_out_of_stock>
                <include_child_product>true</include_child_product>
                <include_out_of_stock_from_non_cache>false</include_out_of_stock_from_non_cache>
                <include_only_enabled_child_product>true</include_only_enabled_child_product>
                <include_out_of_stock_child_product>false</include_out_of_stock_child_product>
		<field_conf>{}</field_conf>
		<exclude_category>[]</exclude_category>
                <tracker_url>https://tracker.unbxdapi.com/</tracker_url>
                <platform_url>https://accounts.unbxdapi.com/admin/</platform_url>
                <service_url>https://starwreck.unbxd.com/</service_url>
                <feed_url>https://feed.unbxdapi.com/</feed_url>
            </general>
        </unbxd>
    </default>
</config>
